<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Assignments In-Style</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/pagemap.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, core, syntax"/>

  </head>

  <body>
    <div class="world">
      <canvas id="map"></canvas>

      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/68-assignments-in-style.html">Assignments In-Style</a></h1>
      </section>

      <article class="post">
        <p>The introduction of <em>pattern matching</em> in Ruby 2.7 brought us a new style of multi-assigning local variables: The <strong>pattern assignment</strong>, or, how you could also call it, the <strong>assignment in-style</strong>.</p>

<p></p>

<p>After you have <a href="/67-warning-the-experiment.html">deactivated the warnings for experimental features</a>, try the following piece of code:</p>

<pre><code>[1, 2, 3, 4] in [first, second, *other]
</code></pre>

<p><strong>Think:</strong> Put <code>[1, 2, 3, 4]</code> into <code>[first, second, *other]</code></p>

<pre><code>first # =&gt; 1
second # =&gt; 2
other # =&gt; [3,4]
</code></pre>

<p>This is a great addition to the <a href="/14-meeting-some-locals.html">previous two and a half ways of assigning local variables</a>. Let's see some more examples, starting with the most basic one:</p>

<pre><code>0 in a # =&gt; nil
a # =&gt; 0
</code></pre>

<p>When assigning multiple values, be sure to supply exactly the number of expected values:</p>

<pre><code>cities = %w[Berlin Potsdam Magdeburg]
cities in [a,b] # NoMatchingPatternError
cities in [x,y,z]
x #=&gt; Berlin
y #=&gt; Potsdam
z #=&gt; Magdeburg
</code></pre>

<p>If your array is of unknown length, use an asterisk, like in the introductory example.</p>

<p>Pattern assignments also have type checks built in:</p>

<pre><code>cities = %w[Berlin Potsdam Magdeburg]
cities in [Integer =&gt; c_1, *c_other] # NoMatchingPatternError
cities in [String =&gt; c_1, *c_other]
c_other # =&gt; ["Potsdam", "Magdeburg"]
</code></pre>

<p>Which, of course, also work for single assignments:</p>

<pre><code>0 in Float =&gt; a # NoMatchingPatternError
0 in Integer =&gt; a
</code></pre>

<p>Since hashes are also supported, we can finally have JavaScript-like object destructuring¹:</p>

<pre><code>{
  verb: "CREATE",
  endpoint: "/syntax",
  authed: true,
} in { verb:, endpoint: }

verb #=&gt; "CREATE"
endpoint #=&gt; "/syntax"
</code></pre>

<p>¹ Differently from arrays, there is no need to specify all hash keys of the given hash object</p>

<h2 id="also-see">Also See</h2>

<ul>
  <li><a href="/quiz/2020/january/#/1">More examples and info at the Idiosyncratic Ruby Quiz 2020</a></li>
  <li><a href="https://speakerdeck.com/k_tsj/pattern-matching-new-feature-in-ruby-2-dot-7">Pattern matching explained by its author</a></li>
  <li><a href="https://rubyreferences.github.io/rubyref/language/pattern-matching.html">Pattern matching documented at the Ruby Reference</a></li>
</ul>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/2bc0ab6325415a4bad09caeea2c6398f09c95150#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Previous Article: <a href="/67-warning-the-experiment.html">Warning: The Experiment</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Core, Syntax<br>
        Last Update: August 04, 2020
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>