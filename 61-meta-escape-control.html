<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Meta Escape Control</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, strings, syntax, escape"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/61-meta-escape-control.html">Meta Escape Control</a></h1>
      </section>

      <article class="post">
        <p>Double-quoted strings can not only be used with interpolation, <code>#{}</code>, they also support various escape sequences, which are initiated with <code>\</code>. Escape sequences allow you to embed raw byte and codepoint values. Furthermore, there are shortcuts for common formatting and control characters.</p>

<p></p>

<h2 id="byte-sequences">Byte Sequences</h2>

<p>There are two basic ways in which you can specify raw bytes to embed: <code>\x00</code> (hexadecimal) or <code>\000</code> (octal):</p>

<pre><code>"\x20" # =&gt; " " # space
"\xab" # =&gt; "\xAB" # byte value 171
"\033" # =&gt; "\e" # escape
"\0"   # =&gt; "\u0000" # null byte
</code></pre>

<h3 id="meta-escapes">Meta Escapes</h3>

<p>There is a <em>meta escape</em> syntax <code>"\M-x"</code> with <strong>x</strong> being a byte value. If the byte is below 128 (<code>\x80</code>), it will add 128, otherwise it will return the same value. Differently put: It will return the same byte value with 8th bit set. The <strong>x</strong> value can be escaped again:</p>

<pre><code>"A".unpack("C")    # =&gt; [65]
"\M-A".unpack("C") # =&gt; [193]
"\M-\x01" # =&gt; "\x81"
"\M-\x81" # =&gt; "\x81"
</code></pre>

<h3 id="control-escapes">Control Escapes</h3>

<p>Another legacy syntax is the <em>control escape</em> syntax: <code>"\C-x"</code> (or <code>"\cx"</code>)  with <strong>x</strong> being a byte value. It will return the value of the 5 least significant bits, so the value will also between 0 and 31. The <strong>x</strong> value can be escaped again, or combined with <em>meta escapes</em>:</p>

<pre><code>"\C-\x01" # =&gt; "\u0001"
"\C-!"    # =&gt; "\u0001"
"\C-A"    # =&gt; "\u0001"
"\M-\C-A" # =&gt; "\x81"
"\C-\M-A" # =&gt; "\x81"
</code></pre>

<h2 id="unicode-codepoints">Unicode Codepoints</h2>

<p>Unicode characters are represented by codepoint values. If you know the numerical codepoint value, you can embed it in a double-quoted string using <code>\u</code>. You must use exactly 4 digits of the hexadecimal representation of the value, but casing is not relevant:</p>

<pre><code>"\u0020" # =&gt; " " # space
"\u00A0" # =&gt; "Â " # no-break space
"\u203d" # =&gt; "â€½" # interrobang
</code></pre>

<p>The <code>\u</code> syntax supports a more explicit <code>{}</code> flavor:</p>

<pre><code>"\u{9}" # =&gt; "\t" # tab
"\u{2602}" # =&gt; "â˜‚" # umbrella
</code></pre>

<p>The <code>\u{}</code> syntax is required if you want to display codepoints which need more than four hexadecimal digest, for example, <a href="https://codepoints.net/U+1F6A1"><code>U+1F6A1 AERIAL TRAMWAY</code></a>:</p>

<pre><code>"\u{1F6A1}" # "ðŸš¡"
</code></pre>

<p>It also allows you to specify multiple characters at once:</p>

<pre><code>"\u{49 64 69 6f 73 79 6e 63 72 e4 74 69 63 20 52 75 62 79}"
# =&gt; "IdiosyncrÃ¤tic Ruby"
</code></pre>

<h2 id="control-and-formatting-characters">Control and Formatting Characters</h2>

<p>Some byte values used for common control/formatting characters have escape sequences:</p>

<table>
  <thead>
    <tr>
      <th>Escape</th>
      <th>Byte Value</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>\a</code></td>
      <td>7</td>
      <td>terminal bell</td>
    </tr>
    <tr>
      <td><code>\b</code></td>
      <td>8</td>
      <td>backspace</td>
    </tr>
    <tr>
      <td><code>\t</code></td>
      <td>9</td>
      <td>tab</td>
    </tr>
    <tr>
      <td><code>\n</code></td>
      <td>10</td>
      <td>newline</td>
    </tr>
    <tr>
      <td><code>\v</code></td>
      <td>11</td>
      <td>vertical tab</td>
    </tr>
    <tr>
      <td><code>\f</code></td>
      <td>12</td>
      <td>form feed</td>
    </tr>
    <tr>
      <td><code>\r</code></td>
      <td>13</td>
      <td>carriage return</td>
    </tr>
    <tr>
      <td><code>\e</code></td>
      <td>27</td>
      <td>start <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">escape sequence</a></td>
    </tr>
    <tr>
      <td><code>\s</code></td>
      <td>32</td>
      <td><code> </code> (space)</td>
    </tr>
  </tbody>
</table>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/98945b36ee61d312a9d1863e278be8e8607d65ac#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Next Article: <a href="/62-less-features-more-fun.html">Less Feature-Rich, More Fun</a></li>
            <li>Previous Article: <a href="/60-escape-back-referencing.html">Escape Back Referencing</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          Article Contributions by: Yauheni Dakuka<br>
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Strings, Syntax, Escape<br>
        Last Update: July 09, 2018
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>