<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Constant Visibility</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, core, constants"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/52-constant-visibility.html">Constant Visibility</a></h1>
      </section>

      <article class="post">
        <p>It is less common, but similar to methods, constants have a visibility attached to them. You have the choice between <strong>private</strong> and <strong>public</strong>, and you can also mark a constant <strong>deprecated</strong>!</p>

<p></p>

<p>Like with methods, the default visibility of a constant is <strong>public</strong>. Unlike methods, <a href="/25-meta-methodology.html">which have a lot of associated methods for metaprogramming</a>, working with constants is easier:</p>

<pre><code>Module.methods.grep /const/
=&gt; [:const_get, :constants, :const_defined?, :const_set, :private_constant,
:public_constant, :deprecate_constant, :const_missing]

Module.private_methods.grep /const/
=&gt; [:remove_const]
</code></pre>

<p>Besides some minor idiosyncrasies (like the visibility modifiers, which where introduced at a later time, refer to constants with <em>constant</em>, while the others just use <em>const</em>), their usage is straight forward.</p>

<h2 id="effects-of-visibility-modifications">Effects of Visibility Modifications</h2>

<p>You must create a constant before you can modify its visibility. When a constant exists, you can use the class method <a href="https://ruby-doc.org/core/Module.html#method-i-private_constant"><code>private_constant</code></a> or <a href="https://ruby-doc.org/core/Module.html#method-i-deprecate_constant"><code>deprecate_constant</code></a> to alter its behaviour. You can change <strong>private</strong> visibility back to the original state using the <a href="https://ruby-doc.org/core/Module.html#method-i-public_constant"><code>public_constant</code></a> method. You cannot "undeprecate" constants.</p>

<h3 id="public">Public</h3>

<p>This is the default behavior, the constant can be referenced from anywhere and shows up in the <a href="https://ruby-doc.org/core/Module.html#method-i-constants"><code>constants</code></a> list:</p>

<pre><code>module Namespace
  module Public
  end
end

Namespace::Public # =&gt; Namespace::Public

Namespace.const_defined?(:Public) # =&gt; true
Namespace.constants.include?(:Public) # =&gt; true
</code></pre>

<h3 id="private">Private</h3>

<p>The constant cannot referenced via the <code>::</code> operator and does not show up in the constants list. They can still be accessed from within the namespace and via <a href="https://ruby-doc.org/core/Module.html#method-i-const_get"><code>const_get</code></a>:</p>

<pre><code>module Namespace
  module Private
  end

  private_constant :Private
end

Namespace::Private # NameError: private constant Namespace::Private referenced

module Namespace
  Private # =&gt; Namespace::Private
end

Namespace.const_defined?(:Private) # =&gt; true
Namespace.constants.include?(:Private) # =&gt; false

Namespace.const_get(:Private) # =&gt; Namespace::Private
</code></pre>

<h3 id="deprecated">Deprecated</h3>

<p>This is an additional property, which is also stored in a constant's visibility flag. Whenever you reference it, it will output a (<a href="https://idiosyncratic-ruby.com/3-ruby-can-you-speak-louder.html#verbosity">$VERBOSE level independent</a>) warning:</p>

<pre><code>module Namespace
  module Deprecated
  end

  deprecate_constant :Deprecated
end

Namespace::Deprecated # =&gt; Namespace::Deprecated
# warning: constant Namespace::Deprecated is deprecated

Namespace.const_defined? :Deprecated # =&gt; true
Namespace.constants.include? :Deprecated # =&gt; true
</code></pre>

<h2 id="more-about-constants">More about Constants</h2>

<ul>
  <li><a href="https://ruby-doc.org/core/doc/syntax/modules_and_classes_rdoc.html#label-Constants">RDoc: Modules (Constants)</a></li>
  <li><a href="http://cirw.in/blog/constant-lookup.html">Everything you ever wanted to know about constant lookup in Ruby</a></li>
  <li><a href="/45-constant-shuffle.html">Constants can be redefined and removed</a></li>
</ul>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/b55cbe7b47d3ce740f67c090093518547f16d176#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Next Article: <a href="/53-the-constant-tree.html">The Constant Tree</a></li>
            <li>Previous Article: <a href="/51-half-kilo-of-sha256.html">Â½ Kilo of SHA256</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Core, Constants<br>
        Last Update: December 25, 2017
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>