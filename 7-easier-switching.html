<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: Easier Switching</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, cli-options, globals"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/7-easier-switching.html">Easier Switching</a></h1>
      </section>

      <article class="post">
        <p>There is a command-line switch to enable command-line switches:</p>

<p></p>

<h2 id="s"><code>-s</code></h2>

<pre><code>Enables some switch parsing for switches after script name but before
any file name arguments (or before a --).  Any switches found there
are removed from ARGV and set the corresponding variable in the script.
</code></pre>

<p>In this context "corresponding variable" means <em>global variable</em>. Let's see this in action (the <code>-e</code> option is for executing the Ruby code that follows in a string):</p>

<pre><code>$ ruby -se 'p $option'
# nil

$ ruby -se 'p $option' -- -option
# true
</code></pre>

<h2 id="switching-files">Switching Files</h2>

<p>You can add command-line options to the <a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29">Ruby shebang line</a>, which makes using the switch feature from the command-line more readable. Create a Ruby file (<code>switch.rb</code>) and add:</p>

<pre><code>#!ruby -s
p $option
</code></pre>

<p>No you can call it like this:</p>

<pre><code>$ ruby switch.rb -option
# true
</code></pre>

<h2 id="caveats">Caveats!</h2>

<p>You should be careful, not to trigger the wrong switches:</p>

<pre><code>$ ruby switch.rb -LOAD_PATH
switch.rb: $LOAD_PATH is a read-only variable (NameError)

$ ruby switch.rb -0
switch.rb: no implicit conversion of true into String (TypeError)

$ ruby switch.rb -stdout
switch.rb: $stdout must have write method, TrueClass given (TypeError)

$ ruby switch.rb -SAFE
switch.rb: no implicit conversion of true into Integer (TypeError)
</code></pre>

<h2 id="resources">Resources</h2>

<ul>
  <li><code>man ruby</code></li>
</ul>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/a911aa14618828c656916c15711428364a6ece7e#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Next Article: <a href="/8-self-improvement.html">Self Improvement</a></li>
            <li>Previous Article: <a href="/6-run-ruby-run.html">Run Ruby, Run!</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Cli-options, Globals<br>
        Last Update: December 25, 2017
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>