<!doctype html>
<html>
  <head>
    <title>Idiosyncratic Ruby: The Art of Arguments</title>
    <link rel="alternate" type="application/atom+xml" title="Idiosyncratic Ruby Feed" href="/feed.xml" />
<link href="/stylesheets/all.css" rel="stylesheet" type="text/css" />

<script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/app.js" type="text/javascript"></script>

<meta charset="utf-8">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="description" content="Documenting All Ruby Specialities."/>
<meta name="keywords" content="ruby, core, globals, cli"/>

  </head>

  <body>
    <div class="world">
      <section class="post-header">
        <a href="/" class="post-logo"><img src="/images/idiosyncratic.png" alt="Idiosyncratic Ruby"></a>
        <h1 class="post-heading" id="top"><a href="/46-the-art-of-arguments.html">The Art of Arguments</a></h1>
      </section>

      <article class="post">
        <p>There is nothing easier than parsing the command-line arguments given to your Ruby program: It is an array found in the special variable <code>$*</code>:</p>

<p></p>

<pre><code>$ ruby -e 'p $*' -- some command line --arguments
["some", "command", "line", "--arguments"]
</code></pre>

<h2 id="that-is-too-easy">That is Too Easy!</h2>

<p>The trouble begins with supporting <a href="http://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html">common arguments conventions, like GNU's</a>, and combining it with Ruby DSLs. This has lead to <a href="https://www.ruby-toolbox.com/categories/CLI_Option_Parsers">hundreds of Ruby libraries</a> parsing command line options, even the <a href="https://idiosyncratic-ruby.com/20-better-standards.html">standard library</a> includes two ways: <a href="https://ruby-doc.org/stdlib/libdoc/optparse/rdoc/OptParse.html">OptParse</a> and <a href="https://ruby-doc.org/stdlib/libdoc/getoptlong/rdoc/GetoptLong.html">GetoptLong</a>.</p>

<h2 id="which-one-is-the-best">Which One is the Best?</h2>

<p>Despite all the options above, I found myself using <code>$*</code> directly very often, because it is simple and does not require remembering the API of an option parser. Unfortunately, this also means loosing the ability to understand the mentioned conventions for command-line options.</p>

<p>This changed the day I came across the <a href="https://github.com/substack/minimist">minimist option parser</a> for NodeJS! It evolved out of the <strong>Optimist</strong> option parser, which has the following slogan:</p>

<blockquote>
<p><em>With Optimist, the options are just a hash! No optstrings attached.</em></p>
<a href="https://github.com/substack/node-optimist#examples">&mdash; node-optimist readme</a>
</blockquote>

<h2 id="we-need-this-in-ruby">We Need This in Ruby!</h2>

<p><a href="https://github.com/janlelis/rationalist">Why not?</a>¹ It features a superior API:</p>

<pre><code>$ ruby example/parse.rb -x 3 -y 4 -n5 -abc --beep=boop foo bar baz
{ _: [ 'foo', 'bar', 'baz' ],
  x: 3,
  y: 4,
  n: 5,
  a: true,
  b: true,
  c: true,
  beep: 'boop' }
</code></pre>

<p>The contents of <code>parse.rb</code>:²</p>

<pre><code>require 'rationalist'
p Rationalist.parse(ARGV)
</code></pre>

<ul>
  <li>You always get back a Ruby hash</li>
  <li>Options get their own key</li>
  <li>Untreated arguments go to <code>:_</code></li>
  <li>The default usage is simple, yet advanced processing is easily configurable</li>
</ul>

<p>¹ <strong>By the way:</strong> On its syntactical surface, JavaScript and Ruby have more in common than you would usually expect. Take arrays <code>[]</code> and hashes <code>{}</code>: They just look very similar!<br />
² To continue the tradition of <a href="/9-globalization.html">Perl-style two-letter variables</a>, we should probably do:<br /><code>$★ = Rationalist.parse(ARGV)</code></p>


        <h2>More Idiosyncratic Ruby</h2>
        <ul>
          <li><a href="https://github.com/janlelis/idiosyncratic-ruby.com/commit/5bc261c20e4378fb4dea3f61494f8b0f2fd6a327#all_commit_comments">Please Comment on GitHub</a></li>
            <li>Next Article: <a href="/47-ruby-tricks-of-2013.html">Ruby TRICKS of 2013</a></li>
            <li>Previous Article: <a href="/45-constant-shuffle.html">Constant Shuffle</a></li>
        </ul>
      </article>

      <footer>
        <div class="footer-right">
          On <a href="/">Idiosyncratic Ruby</a> by <a href="https://janlelis.com">Jan Lelis</a><br>
          Article Contributions by: Yauheni Dakuka<br>
          <a href="https://janlelis.com/data-protection.html">Data Protection</a>
        </div>
        About Core, Globals, Cli<br>
        Last Update: July 09, 2018
      </footer>
    </div>
    <script src="/javascripts/rainbow-custom.min.js" type="text/javascript"></script>
  </body>
</html>